---
title: '用 Framer Motion 创造 SVG 动画「Dark Mode 开关」'
publishedAt: '2021-05-17'
summary: '学习如何使用 Framer Motion 创造 SVG 动画，让「黑暗模式开关」更生动...'
image: '/img/using-framer-motion-to-animate-svg-icon/banner.png'
---

<Image
  alt={`Dark Mode Toggle`}
  src={`/img/using-framer-motion-to-animate-svg-icon/banner.png`}
  width={1280}
  height={640}
  priority
/>

> inspired by this [blog post](https://jfelix.info/blog/using-react-spring-to-animate-svg-icons-dark-mode-toggle)

本文介绍如何使用 Framer Motion 创造 SVG 动画，如果你不想一步一步编写代码请在 github 查看 [源码]()

提升用户体验是 web 开发从业者的主要目标，有时我们会看到一些精妙细微的动画效果给整个网站注入活力。今天我想从黑暗模式开关入手，探索 Framer Motion 的用途。具体来说就是从太阳到月亮的渐进切换。

### 🌞 🌛 图标

以下是太阳的 SVG 图标代码，而月亮图标我们稍后用 mask 来创建

```jsx
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle fill="black" cx="12" cy="12" r="5" />
  <line x1="12" y1="1" x2="12" y2="3" />
  <line x1="12" y1="21" x2="12" y2="23" />
  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
  <line x1="1" y1="12" x2="3" y2="12" />
  <line x1="21" y1="12" x2="23" y2="12" />
  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
</svg>
```

### 🌞 🌛 两个图标合二为一

首先，我们给 circle 加上填充色（黑色）以便于创建 mask

然后用 `<g>` 标签包裹所有 line 元素，本质上相当于给 SVG 元素加上一个 div

```jsx
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle fill="black" cx="12" cy="12" r="5" />
  <g stroke="currentColor">
    <line x1="12" y1="1" x2="12" y2="3" />
    <line x1="12" y1="21" x2="12" y2="23" />
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
    <line x1="1" y1="12" x2="3" y2="12" />
    <line x1="21" y1="12" x2="23" y2="12" />
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
  </g>
</svg>
```

接下来创建 `<mask>` 并给它一个 `id`, 使之与 `<circle>` 标签关联。

```jsx{2,5}
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <mask id="moon-mask">
    <rect x="0" y="0" width="100%" height="100%" fill="white" />
    <circle cx="12" cy="4" r="9" fill="black" />
  </mask>
  <circle cx="12" cy="12" r="5" mask="url(#moon-mask)" />
  <g stroke="currentColor">
    <line x1="12" y1="1" x2="12" y2="3" />
    <line x1="12" y1="21" x2="12" y2="23" />
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
    <line x1="1" y1="12" x2="3" y2="12" />
    <line x1="21" y1="12" x2="23" y2="12" />
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
  </g>
</svg>
```
